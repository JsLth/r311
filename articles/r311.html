<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="r311">
<title>r311: An R interface to the open311 standard • r311</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Roboto-0.4.9/font.css" rel="stylesheet">
<link href="../deps/JetBrains_Mono-0.4.9/font.css" rel="stylesheet">
<link href="../deps/Roboto_Slab-0.4.9/font.css" rel="stylesheet">
<!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="r311: An R interface to the open311 standard">
<meta property="og:description" content="r311">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">r311</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item">
  <a class="nav-link" href="../index.html">
    <span class="fa fa-home"></span>
     
    Overview
  </a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../articles/r311.html">
    <span class="fa fa-book"></span>
     
    Get started
  </a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">
    <span class="fa fa-search"></span>
     
    Reference
  </a>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>r311: An R interface to the open311 standard</h1>
            
      
      
      <div class="d-none name"><code>r311.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="introduction">Introduction<a class="anchor" aria-label="anchor" href="#introduction"></a>
</h2>
<p>open311 is an international open-access standard for civic issue
management and public service communication. The standard allows
administrations to better manage citizen reuqests, citizens to more
easily participate in administrative work, and researchers and data
scientists to access data regarding public service communication. As an
open standard, open311 is not a centralized API, but a framework that is
implemented by various cities (e.g. San Francisco, CA, Chicago, IL,
Cologne, DE, Turku, FI, Zürich, CH) and services (e.g. SeeClickFix,
FixMyStreet).</p>
<p>It is way past the golden age of open311 APIs and much of development
in civic issue tracking has shifted to less open-access and less
standardized alternatives. Many former prime examples have abandoned or
severely limited their open311 endpoints. Nonetheless, open311 still
constitutes a valuable source for open government data. Many cities and
services still maintain an open311 service.</p>
<p><code>r311</code> enables the seamless management and selection of
endpoints and the retrieval of service and request data. It supports
(but does not depend on) many popular R frameworks such as the
tidyverse, <code>sf</code> and <code>xml2</code> for response
formatting. `r311`` is designed to be slim, both in content and
dependencies. It only imports two import-less packages used for HTTP
response handling. The functionalities are limited to two main
features:</p>
<ul>
<li>Endpoint management</li>
<li>Sending requests</li>
</ul>
<p>This vignette will briefly cover these two features.</p>
</div>
<div class="section level2">
<h2 id="endpoints">Endpoints<a class="anchor" aria-label="anchor" href="#endpoints"></a>
</h2>
<p>Since open311 is an open and decentralized standard, there is not one
but many endpoints that one can access. An endpoint is commonly
implemented by a city administration, but can also be managed by a
service provider such as FixMyStreet. Each endpoint can define multiple
jurisidiction IDs, although, in practice, most endpoints only define a
single jurisdiction.</p>
<p>It can thus be difficult to manage the multitude of endpoints and
jurisdictions. Efforts have been made to list open311 servers, but most
of them are incomplete or outdated. <code>r311</code> offers an updated
and modifiable endpoint list that defines a number of open311
implementations that are defined for use in the package. The list can be
read using <code>o311_endpoints</code>.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/o311_endpoints.html">o311_endpoints</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 61 × 9</span></span></span>
<span><span class="co">#&gt;    name            root  docs  jurisdiction key   pagination limit json  dialect</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>           <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>      <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> Annaberg-Buchh… http… http… annberg-buc… FALSE TRUE          50 TRUE  Mark-a…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> Bloomington, IN http… <span style="color: #BB0000;">NA</span>    bloomington… FALSE TRUE        <span style="text-decoration: underline;">1</span>000 TRUE  uReport</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> Bonn, DE        http… http… bonn.de      FALSE TRUE         100 TRUE  Mark-a…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> Boston, MA      http… http… boston.gov   FALSE TRUE          50 TRUE  Connec…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> Brookline, MA   http… http… brooklinema… FALSE TRUE          50 TRUE  Connec…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> Austin, TX      http… http… <span style="color: #BB0000;">NA</span>           FALSE TRUE          50 TRUE  Connec…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> Chicago, IL     http… http… cityofchica… FALSE TRUE          50 TRUE  Connec…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> Köln / Cologne… http… http… stadt-koeln… FALSE TRUE          50 TRUE  Mark-a…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> Ottawa, ON      http… <span style="color: #BB0000;">NA</span>    ottawa.ca    FALSE TRUE        <span style="text-decoration: underline;">1</span>000 TRUE  <span style="color: #BB0000;">NA</span>     </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> Rostock, DE     http… http… rostock.de   FALSE FALSE         <span style="color: #BB0000;">NA</span> TRUE  CitySDK</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 51 more rows</span></span></span></code></pre></div>
<p>The list does neither claim comprehensiveness nor up-to-dateness. It
arguably provides some of the most important and easily accessible
endpoints as of 2024. However, <code>r311</code> also offers the ability
to add new endpoints to <code>o311_endpoints</code> using
<code>o311_add_endpoint</code>. You need to provide a name (for lookup)
and a root URL (the URL used to send requests). The following code adds
the open311 test server of San Francisco.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/o311_endpoints.html">o311_add_endpoint</a></span><span class="op">(</span></span>
<span>  name <span class="op">=</span> <span class="st">"San Francisco Test"</span>,</span>
<span>  root <span class="op">=</span> <span class="st">"http://mobile311-dev.sfgov.org/open311/v2/"</span>,</span>
<span>  jurisdiction <span class="op">=</span> <span class="st">"sfgov.org"</span></span>
<span><span class="op">)</span></span></code></pre></div>
<p>Retrieving the endpoints list again confirms that you successfully
added a new row to the endpoints dataframe.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/nrow.html" class="external-link">nrow</a></span><span class="op">(</span><span class="fu"><a href="../reference/o311_endpoints.html">o311_endpoints</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 62</span></span></code></pre></div>
<p>You can now select the San Francisco test API to the session using
<code>o311_api</code>. This function matches an API using endpoint name
and jurisdiction ID and attaches it to the active session. Query
functions automatically detect the attached API.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/o311_api.html">o311_api</a></span><span class="op">(</span><span class="st">"San Francisco Test"</span><span class="op">)</span></span></code></pre></div>
<p>After attaching an API, <code>o311_ok</code> confirms that the
selected endpoint is able to handle request queries.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/o311_ok.html">o311_ok</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] TRUE</span></span></code></pre></div>
<p>As the result is , you can safely start receiving real request
data.</p>
</div>
<div class="section level2">
<h2 id="making-requests">Making requests<a class="anchor" aria-label="anchor" href="#making-requests"></a>
</h2>
<p>After selecting an API and attaching it to the session, all functions
can access it. You can now make requests.</p>
<p>To get an overview of the available services in a jurisdiction, you
can use <code>o311_services</code>, which returns a list of San
Francisco’s administrative services.</p>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/o311_services.html">o311_services</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 21 × 6</span></span></span>
<span><span class="co">#&gt;    service_code             service_name        description metadata type  group</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>       <span style="color: #949494; font-style: italic;">&lt;lgl&gt;</span>    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 6050cd8ce8961bbfa32bcf2c Shared Spaces       Use this o… TRUE     batch Gene…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 55d6cb85df86af51c305616e Noise Issue         <span style="color: #BB0000;">NA</span>          TRUE     batch Gene…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 5fe20af6e896f754e2784e99 Holiday Tree Remov… <span style="color: #BB0000;">NA</span>          FALSE    batch Stre…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 518d5892601827e3880000c5 Street or Sidewalk… <span style="color: #BB0000;">NA</span>          TRUE     batch Stre…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 518d572e601827e388000058 Garbage Containers  Report an … TRUE     batch Stre…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 50fea92c4aa48a4a9e000099 Graffiti            Report bui… TRUE     batch Stre…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 50fea6d54aa48a4a9e00002e Illegal Postings    Report han… TRUE     batch Stre…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 518d564b601827e38800002d Blocked Pedestrian… <span style="color: #BB0000;">NA</span>          TRUE     batch Stre…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 55e8409a45ff461f92000006 Encampment          <span style="color: #BB0000;">NA</span>          TRUE     batch Stre…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 518d5d52601827e3880001b1 Abandoned Vehicles  Report a v… TRUE     batch Park…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 11 more rows</span></span></span></code></pre></div>
<p>To get data about civic issues in the city area, run
<code>o311_requests</code>.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/o311_requests.html">o311_requests</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 50 features and 10 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -122.5111 ymin: 37.74945 xmax: -122.3949 ymax: 37.79207</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 50 × 11</span></span></span>
<span><span class="co">#&gt;    service_request_id status service_name               service_code description</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1020140302         open   Street or Sidewalk Cleani… 518d5892601… Test - gar…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1020139578         open   Street or Sidewalk Cleani… 518d5892601… Garbage on…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 1020139514         open   Encampment                 55e8409a45f… <span style="color: #BB0000;">NA</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1020139511         open   Shared Spaces              6050cd8ce89… <span style="color: #BB0000;">NA</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 1020139507         open   Tree Maintenance           518d595d601… southbound…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1020139506         open   Pothole &amp; Street Issues    50fea9c24aa… southbound…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 1020139503         open   Tree Maintenance           518d595d601… southbound…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 1020139502         open   Pothole &amp; Street Issues    50fea9c24aa… southbound…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 1020139501         open   Tree Maintenance           518d595d601… southbound…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 1020139500         open   Pothole &amp; Street Issues    50fea9c24aa… southbound…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 40 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 6 more variables: requested_datetime &lt;chr&gt;, updated_datetime &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   address &lt;chr&gt;, media_url &lt;chr&gt;, status_notes &lt;chr&gt;, geometry &lt;POINT [°]&gt;</span></span></span></code></pre></div>
<p>Using the output of <code>o311_services</code>, you can further
narrow down the output of requests. Open311 defines a set of standard
parameters which are implemented by all endpoints. Using the
<code>service_code</code> parameter with one of the previously returned
service codes, only complaints about businesses illegally using shared
spaces are returned.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/o311_requests.html">o311_requests</a></span><span class="op">(</span>service_code <span class="op">=</span> <span class="st">"6050cd8ce8961bbfa32bcf2c"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 50 features and 9 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -122.444 ymin: 37.75765 xmax: -122.3931 ymax: 37.79074</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 50 × 10</span></span></span>
<span><span class="co">#&gt;    service_request_id status service_name  service_code       requested_datetime</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1020139511         open   Shared Spaces 6050cd8ce8961bbfa… 2023-12-08T23:54:…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1020139479         open   Shared Spaces 6050cd8ce8961bbfa… 2023-12-05T22:52:…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 1020139460         open   Shared Spaces 6050cd8ce8961bbfa… 2023-12-01T17:20:…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1020139449         open   Shared Spaces 6050cd8ce8961bbfa… 2023-11-29T23:30:…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 1020139418         open   Shared Spaces 6050cd8ce8961bbfa… 2023-11-27T18:53:…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1020139417         open   Shared Spaces 6050cd8ce8961bbfa… 2023-11-27T18:43:…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 1020139414         open   Shared Spaces 6050cd8ce8961bbfa… 2023-11-27T18:31:…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 1020139411         open   Shared Spaces 6050cd8ce8961bbfa… 2023-11-27T18:23:…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 1020139392         open   Shared Spaces 6050cd8ce8961bbfa… 2023-11-17T02:14:…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 1020139391         open   Shared Spaces 6050cd8ce8961bbfa… 2023-11-17T02:14:…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 40 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 5 more variables: updated_datetime &lt;chr&gt;, address &lt;chr&gt;, description &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   status_notes &lt;chr&gt;, geometry &lt;POINT [°]&gt;</span></span></span></code></pre></div>
<p>Similarly, using a <code>service_request_id</code> from the output,
you can retrieve a single service request from the API.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/o311_requests.html">o311_request</a></span><span class="op">(</span><span class="st">"1020139511"</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 1 feature and 7 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -122.4183 ymin: 37.775 xmax: -122.4183 ymax: 37.775</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 8</span></span></span>
<span><span class="co">#&gt;   service_request_id status service_name  service_code        requested_datetime</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">*</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>               <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>             </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span> 1020139511         open   Shared Spaces 6050cd8ce8961bbfa3… 2023-12-08T23:54:…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 3 more variables: updated_datetime &lt;chr&gt;, address &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   geometry &lt;POINT [°]&gt;</span></span></span></code></pre></div>
<p>Many endpoints define a page limit meaning that responses are divided
into pages. A query without parameters returns the first page.
Pagination can be controlled with the <code>page</code> argument. To
control pagination, the <code>o311_request_all</code> function can come
in handy. It automatically iterates through pages and heuristically
decides when to stop. The following example retrieves data from the
first two pages.</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/o311_requests.html">o311_request_all</a></span><span class="op">(</span>max_pages <span class="op">=</span> <span class="fl">2</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 100 features and 10 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: -122.5111 ymin: 37.73277 xmax: -122.3931 ymax: 37.79207</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 100 × 11</span></span></span>
<span><span class="co">#&gt;    service_request_id status service_name               service_code description</span></span>
<span><span class="co">#&gt;    <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>              <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>  <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>                      <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span> 1020140302         open   Street or Sidewalk Cleani… 518d5892601… Test - gar…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span> 1020139578         open   Street or Sidewalk Cleani… 518d5892601… Garbage on…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span> 1020139514         open   Encampment                 55e8409a45f… <span style="color: #BB0000;">NA</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span> 1020139511         open   Shared Spaces              6050cd8ce89… <span style="color: #BB0000;">NA</span>         </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span> 1020139507         open   Tree Maintenance           518d595d601… southbound…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span> 1020139506         open   Pothole &amp; Street Issues    50fea9c24aa… southbound…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span> 1020139503         open   Tree Maintenance           518d595d601… southbound…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span> 1020139502         open   Pothole &amp; Street Issues    50fea9c24aa… southbound…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span> 1020139501         open   Tree Maintenance           518d595d601… southbound…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span> 1020139500         open   Pothole &amp; Street Issues    50fea9c24aa… southbound…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 90 more rows</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 6 more variables: requested_datetime &lt;chr&gt;, updated_datetime &lt;chr&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   address &lt;chr&gt;, media_url &lt;chr&gt;, status_notes &lt;chr&gt;, geometry &lt;POINT [°]&gt;</span></span></span></code></pre></div>
<p><code>r311</code> implicitly supports API extensions introducing
custom paths and parameters. One such API is Klarschiff Rostock which is
based on CitySDK. Klarschiff CitySDK defines a number of non-default
paths and parameters which extend the filtering abilities of open311
requests. Available parameters can usually be found in the respective
documentation (e.g. on GitHub for <a href="https://github.com/bfpi/klarschiff-citysdk" class="external-link">Klarschiff
CitySDK</a>). The following query returns the last 10 requests tagged
with the “idea” keyword.</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/o311_api.html">o311_api</a></span><span class="op">(</span><span class="st">"Rostock"</span><span class="op">)</span></span>
<span><span class="fu"><a href="../reference/o311_requests.html">o311_requests</a></span><span class="op">(</span>keyword <span class="op">=</span> <span class="st">"idea"</span>, max_requests <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; Simple feature collection with 10 features and 15 fields</span></span>
<span><span class="co">#&gt; Geometry type: POINT</span></span>
<span><span class="co">#&gt; Dimension:     XY</span></span>
<span><span class="co">#&gt; Bounding box:  xmin: 12.05749 ymin: 54.07338 xmax: 12.14697 ymax: 54.17656</span></span>
<span><span class="co">#&gt; Geodetic CRS:  WGS 84</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 10 × 16</span></span></span>
<span><span class="co">#&gt;    service_request_id status_notes  status service_code service_name description</span></span>
<span><span class="co">#&gt;  <span style="color: #BCBCBC;">*</span>              <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>         <span style="color: #949494; font-style: italic;">&lt;int&gt;</span> <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>        <span style="color: #949494; font-style: italic;">&lt;chr&gt;</span>      </span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 1</span>              <span style="text-decoration: underline;">32</span>588 <span style="color: #949494;">""</span>            in_pr…           92 Beschilderu… <span style="color: #949494;">"</span>Der nördl…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 2</span>              <span style="text-decoration: underline;">31</span>268 <span style="color: #949494;">""</span>            in_pr…           99 Beschilderu… <span style="color: #949494;">"</span>An dieser…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 3</span>              <span style="text-decoration: underline;">39</span>932 <span style="color: #949494;">"</span>Vielen Dank… in_pr…          112 Beschilderu… <span style="color: #949494;">"</span>Der Edelw…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 4</span>              <span style="text-decoration: underline;">20</span>159 <span style="color: #949494;">"</span>Das Anliege… in_pr…          112 Beschilderu… <span style="color: #949494;">"</span>Bitte den…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 5</span>              <span style="text-decoration: underline;">39</span>811 <span style="color: #949494;">""</span>            in_pr…          113 Beschilderu… <span style="color: #949494;">"</span>Hydrant l…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 6</span>              <span style="text-decoration: underline;">39</span>298 <span style="color: #949494;">""</span>            in_pr…          113 Beschilderu… <span style="color: #949494;">"</span>Hier fehl…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 7</span>              <span style="text-decoration: underline;">37</span>340 <span style="color: #949494;">""</span>            in_pr…          113 Beschilderu… <span style="color: #949494;">"</span>Wann scha…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 8</span>              <span style="text-decoration: underline;">34</span>572 <span style="color: #949494;">""</span>            in_pr…          113 Beschilderu… <span style="color: #949494;">"</span>Hier fehl…</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;"> 9</span>              <span style="text-decoration: underline;">24</span>824 <span style="color: #949494;">""</span>            in_pr…          113 Beschilderu… <span style="color: #949494;">"</span>Kreuzung …</span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">10</span>              <span style="text-decoration: underline;">21</span>475 <span style="color: #949494;">"</span>Auftrag zum… in_pr…          105 Beleuchtung… <span style="color: #949494;">"</span>Reflektor…</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># ℹ 10 more variables: agency_responsible &lt;chr&gt;, service_notice &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   requested_datetime &lt;chr&gt;, updated_datetime &lt;chr&gt;, expected_datetime &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   address &lt;chr&gt;, adress_id &lt;lgl&gt;, media_url &lt;chr&gt;, zipcode &lt;lgl&gt;,</span></span></span>
<span><span class="co">#&gt; <span style="color: #949494;">#   geometry &lt;POINT [°]&gt;</span></span></span></code></pre></div>
<p>Some custom parameters can also alter the shape of the output. In the
following example, we query just the count of total queried requests
using the <code>just_count</code> parameter. The result is a 1×1 tibble
containing a count value.</p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/o311_requests.html">o311_requests</a></span><span class="op">(</span>just_count <span class="op">=</span> <span class="cn">TRUE</span>, max_requests <span class="op">=</span> <span class="fl">10</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #949494;"># A tibble: 1 × 1</span></span></span>
<span><span class="co">#&gt;   value</span></span>
<span><span class="co">#&gt;   <span style="color: #949494; font-style: italic;">&lt;int&gt;</span></span></span>
<span><span class="co">#&gt; <span style="color: #BCBCBC;">1</span>    10</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by Jonas Lieth.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
